{% extends 'character/base.html' %}

{% block content %}

  <table>
    <td style="padding:0 15px 0 15px;"><h1>{{ name }}</h1></td>
  </table>

  {% regroup chardata by data_type_category as chardata_list %}

  <ul>
    {% for data_type_category in chardata_list %}
      <li>{{ data_type_category.grouper }}
      <ul>
        {% for value in data_type_category.list %}
          <li>{{ value.data_type_name }}: {{ value.data_value }}</li>
        {% endfor %}
      </ul>
    </li>
  {% endfor %}
  </ul>


  <hr> <hr>

  <table>
    <tr>
      <td colspan="2" style="padding:0 15px 0 15px;"><h2>Character Stats</h2></td>
    </tr>
    {% for chardata in charlist %}
    <tr>
      <td style="padding:0 15px 0 15px;"><b>{{ chardata.data_type_name }}</b></td> <td style="padding:0 15px 0 15px;">{{ chardata.data_value }}</td>
    </tr>
    {% endfor %}
  </table>

  <table>
    {% for data in list %}
    {% ifchanged data.data_type_category %}
      <tr>
        <td colspan="8" style="padding:0 15px 0 15px;"><hr><hr></td>
      </tr>
      <tr>
        <td colspan="2" style="padding:0 15px 0 15px;"><h2>{{ data.data_type_category }}</h2></td>
      </tr>
    {% endifchanged %}
      <td style="padding:0 15px 0 15px;"><b>{{ data.data_type_name }}</b></td><td style="padding:0 15px 0 15px;">{{ data.data_value }}</td>
      {% if forloop.last %}
        </tr>
      {% else %}
        {% if forloop.counter|divisibleby:"4" %}
          </tr><tr>
        {% endif %}
      {% endif %}
    {% endfor %}
  </table>
{% endblock %}
